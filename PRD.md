# Onstage - 产品需求文档 (PRD)

> 版本: 1.0.0  
> 更新日期: 2025-01-01  
> 文档状态: Draft

---

## 1. 产品概述

### 1.1 产品定义

**Onstage** 是一款面向服饰品牌的 iOS 原生应用，帮助品牌运营/设计/美工团队使用 AI 快速生成高质量的营销内容（图像），包括官方展示图、商品详情页图、社媒 Campaign 图、UGC 风格内容等。

### 1.2 产品愿景

让每个服饰品牌都能拥有专业级的视觉内容生产能力，将传统需要数天完成的拍摄工作缩短至分钟级别。

### 1.3 目标用户

| 用户角色 | 描述 | 核心诉求 |
|---------|------|---------|
| 品牌运营 | 负责日常社媒内容发布、电商详情页更新 | 快速出图、批量生成、风格一致 |
| 品牌设计师 | 负责品牌视觉调性把控、Campaign 策划 | 精细控制、专业参数、高质量输出 |
| 美工 | 负责图片后期处理、素材管理 | 便捷编辑、资产管理、格式导出 |

### 1.4 产品定位

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│     简单易用 ◄─────────────────────────────────────► 专业控制    │
│                                                                 │
│         Chat Tab                              Shoot Room Tab    │
│         (对话式生成)                            (专业拍摄室)      │
│                                                                 │
│     • 自然语言交互                            • 可视化控制        │
│     • Action Bar 快捷操作                     • 光线/机位/焦距    │
│     • 适合快速迭代                            • 适合精细调整      │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 2. 核心功能模块

### 2.1 功能架构

```
Onstage App
├── Chat Tab (对话式 AI Agent)
│   ├── 对话交互
│   │   ├── 文本输入
│   │   ├── 图像上传 (支持多图，标记图1/图2)
│   │   └── 对话历史
│   ├── Action Bar 快捷操作
│   │   ├── 换搭配
│   │   ├── 换模特
│   │   └── 复刻参考图
│   ├── GUI 输入区 (Action 触发)
│   │   ├── 结构化图像上传
│   │   └── 参数配置
│   └── 结果展示
│       ├── 生成图像
│       └── 后续 Action Bar
│
├── Shoot Room Tab (专业拍摄室)
│   ├── 素材选择区
│   │   ├── 模特选择
│   │   ├── 商品选择
│   │   └── 场景选择
│   ├── 场景编辑区
│   │   ├── 场景物体添加
│   │   └── 物体位置调整
│   ├── 拍摄控制区
│   │   ├── 光线控制器 (位置/方向)
│   │   ├── 机位控制器 (位置)
│   │   └── 高级设置
│   │       ├── 视角调整 (俯拍/平拍/仰拍)
│   │       └── 焦距调整 (16mm-55mm)
│   └── 拍摄执行
│       └── 生成图像
│
└── 通用功能
    ├── 资产管理
    │   ├── 模特库
    │   ├── 商品库
    │   ├── 场景库
    │   └── 生成历史
    └── 用户系统
        ├── 账户管理
        └── 配额管理
```

---

## 3. Chat Tab 详细需求

### 3.0 Agent 架构概述

Chat Tab 采用完整的 **AI Agent 架构**，由 Thinking LLM + Tools 构成：

```
┌─────────────────────────────────────────────────────────────────┐
│                      Chat Agent 架构                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   用户输入 (文本 + 图片)                                         │
│         │                                                       │
│         ▼                                                       │
│   ┌─────────────────────────────────────────────────────────┐  │
│   │              Thinking LLM (Gemini 2.0)                   │  │
│   │                                                          │  │
│   │   • 理解用户意图                                          │  │
│   │   • 分析上传的图片                                        │  │
│   │   • 决定调用哪些 Tools                                    │  │
│   │   • 生成最终回复                                          │  │
│   └─────────────────────────────────────────────────────────┘  │
│         │                                                       │
│         ▼                                                       │
│   ┌─────────────────────────────────────────────────────────┐  │
│   │                    Tool Registry                         │  │
│   │                                                          │  │
│   │   ┌───────────┐ ┌───────────┐ ┌───────────┐            │  │
│   │   │ 换搭配    │ │ 换模特    │ │ 复刻参考  │            │  │
│   │   └───────────┘ └───────────┘ └───────────┘            │  │
│   │   ┌───────────┐ ┌───────────┐ ┌───────────┐            │  │
│   │   │ 生成模特图│ │ 编辑图片  │ │ 分析图片  │            │  │
│   │   └───────────┘ └───────────┘ └───────────┘            │  │
│   │   ┌───────────┐ ┌───────────┐ ┌───────────┐            │  │
│   │   │ 搜索资产  │ │ 获取预设  │ │ 保存资产  │            │  │
│   │   └───────────┘ └───────────┘ └───────────┘            │  │
│   │   ┌───────────┐                                         │  │
│   │   │请求GUI输入│  ← 当需要结构化输入时                    │  │
│   │   └───────────┘                                         │  │
│   └─────────────────────────────────────────────────────────┘  │
│         │                                                       │
│         ▼                                                       │
│   AI 回复 + 生成的图片 + 后续建议                                │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Agent 特性：**

| 特性 | 描述 |
|-----|------|
| **自主推理** | Agent 自动理解用户意图，无需用户选择具体操作 |
| **工具调用** | 根据需求自动选择和调用合适的 Tools |
| **多轮对话** | 支持上下文理解，可以基于之前的对话继续操作 |
| **GUI 协同** | 当需要复杂输入时，Agent 会请求显示 GUI 输入界面 |
| **智能建议** | 完成任务后，Agent 会提供下一步操作建议 |

**用户体验示例：**

```
用户: "帮我把图1的衣服换成图2"
↓
Agent 思考: 用户想要换搭配，图1是原图，图2是新服装
↓
Agent 调用: change_outfit(original="image_1", outfit=["image_2"])
↓
Agent 回复: "换搭配完成！✨ 我保持了原来的模特和场景，只替换了服装。
            你觉得效果怎么样？需要我调整什么吗？"
```

```
用户: "给这件衣服配个模特"
↓
Agent 思考: 用户想要生成模特图，但没有指定风格
↓
Agent 回复: "好的！你想要什么风格的模特呢？
            - 韩系清新风
            - 日系自然风
            - 欧美时尚风
            或者你可以上传一张模特参考图 📷"
```

### 3.1 对话交互

#### 3.1.1 输入区设计

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  ┌─────┐ ┌─────┐                                               │
│  │图1  │ │图2  │  ← 已上传图像预览 (点击可删除)                  │
│  └─────┘ └─────┘                                               │
│                                                                 │
│  ┌─────────────────────────────────────────────────────┬─────┐ │
│  │ 输入你的需求...                                      │ 📷 │ │
│  └─────────────────────────────────────────────────────┴─────┘ │
│                                                          ↑      │
│                                               图像上传按钮       │
└─────────────────────────────────────────────────────────────────┘
```

**功能要点：**

| 功能 | 描述 | 优先级 |
|-----|------|-------|
| 文本输入 | 支持多行文本，自动高度调整 | P0 |
| 图像上传 | 支持相册选择、拍照，单次最多 4 张 | P0 |
| 图像标记 | 上传后自动标记"图1""图2"，方便 prompt 引用 | P0 |
| 图像预览 | 点击可预览大图，长按可删除 | P0 |
| 发送按钮 | 有内容时显示发送按钮 | P0 |

#### 3.1.2 Action Bar

位于输入框上方，横向滚动展示快捷操作入口。

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐                        │
│  │ 换搭配   │ │ 换模特   │ │复刻参考图│  ← 横向滚动             │
│  └──────────┘ └──────────┘ └──────────┘                        │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Action 定义：**

| Action | 功能描述 | 输入要求 |
|--------|---------|---------|
| 换搭配 | 保持模特和场景，替换服装搭配 | 原图 + 新搭配服装图(1-3件) |
| 换模特 | 保持服装和场景，替换模特 | 原图 + 新模特参考图 |
| 复刻参考图 | 参考目标图的构图/氛围，生成类似效果 | 商品图 + 参考图 |

#### 3.1.3 GUI 输入区

点击 Action Bar 后唤起的结构化输入界面（以底部抽屉形式呈现）。

**换搭配 GUI：**

```
┌─────────────────────────────────────────────────────────────────┐
│                         ━━━                                     │
│  换搭配                                                    ✕    │
│  ─────────────────────────────────────────────────────────      │
│                                                                 │
│  原图                                                           │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                                                          │   │
│  │              点击上传原图                                 │   │
│  │              (包含模特的完整图)                           │   │
│  │                                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  新搭配 (最多3件)                                               │
│  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐                  │
│  │   +    │ │ 上衣   │ │ 下装   │ │        │                  │
│  │  添加  │ │  ✕    │ │  ✕    │ │        │                  │
│  └────────┘ └────────┘ └────────┘ └────────┘                  │
│                                                                 │
│  补充说明 (可选)                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 例如：保持休闲风格，颜色搭配协调一些                        │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                        发送                              │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**换模特 GUI：**

```
┌─────────────────────────────────────────────────────────────────┐
│                         ━━━                                     │
│  换模特                                                    ✕    │
│  ─────────────────────────────────────────────────────────      │
│                                                                 │
│  原图                                                           │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              点击上传原图                                 │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  新模特参考                                                     │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              点击上传模特参考图                           │   │
│  │              (清晰的正面/侧面照)                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  或选择系统模特                                                  │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐                          │
│  │    │ │    │ │    │ │    │ │    │  ← 横向滚动               │
│  └────┘ └────┘ └────┘ └────┘ └────┘                          │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                        发送                              │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**复刻参考图 GUI：**

```
┌─────────────────────────────────────────────────────────────────┐
│                         ━━━                                     │
│  复刻参考图                                                 ✕   │
│  ─────────────────────────────────────────────────────────      │
│                                                                 │
│  商品图                                                         │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              点击上传商品图                               │   │
│  │              (纯商品图或平铺图)                           │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  参考图                                                         │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              点击上传参考图                               │   │
│  │              (想要复刻的风格/构图)                        │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  复刻要素                                                       │
│  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐                  │
│  │✓ 构图  │ │✓ 氛围  │ │  姿势  │ │  场景  │                  │
│  └────────┘ └────────┘ └────────┘ └────────┘                  │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                        发送                              │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 3.1.4 对话流展示

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 用户消息气泡                                             │   │
│  │ ┌─────┐ ┌─────┐                                         │   │
│  │ │图1  │ │图2  │                                         │   │
│  │ └─────┘ └─────┘                                         │   │
│  │ 把图1的模特换成图2的风格，保持服装不变                     │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                      14:32     │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ AI 响应气泡                                              │   │
│  │                                                          │   │
│  │ 好的，我来帮你生成新的模特图...                           │   │
│  │                                                          │   │
│  │ ┌──────────────┐ ┌──────────────┐                       │   │
│  │ │              │ │              │                       │   │
│  │ │   结果图1    │ │   结果图2    │                       │   │
│  │ │              │ │              │                       │   │
│  │ └──────────────┘ └──────────────┘                       │   │
│  │                                                          │   │
│  │ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐            │   │
│  │ │ 重新生成│ │ 微调   │ │ 换背景 │ │ 下载   │  ← 后续Action│   │
│  │ └────────┘ └────────┘ └────────┘ └────────┘            │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                      14:33     │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**结果区 Action Bar：**

| Action | 功能 | 说明 |
|--------|-----|------|
| 重新生成 | 使用相同参数重新生成 | 获取不同结果 |
| 微调 | 基于当前结果进行细节调整 | 唤起微调输入框 |
| 换背景 | 保持主体，更换背景 | 唤起背景选择 |
| 下载 | 下载生成的图片 | 支持选择分辨率 |
| 收藏 | 收藏到资产库 | 方便后续使用 |

### 3.2 Agent 能力

#### 3.2.1 可用 Tools

Agent 可以调用以下 Tools 来完成用户任务：

| Tool | 功能 | 触发场景 |
|------|------|---------|
| `analyze_image` | 分析图片内容（服装、模特、场景） | 需要理解图片内容时 |
| `change_outfit` | 换搭配 | 用户要求替换服装 |
| `change_model` | 换模特 | 用户要求替换模特 |
| `replicate_reference` | 复刻参考图 | 用户提供参考图要求复刻风格 |
| `generate_model_image` | 生成模特展示图 | 用户要求为商品生成模特图 |
| `edit_image` | 编辑图片 | 用户要求局部修改 |
| `search_assets` | 搜索用户资产库 | 需要查找用户已有素材 |
| `get_presets` | 获取系统预设 | 需要使用系统预设模特/场景 |
| `save_to_assets` | 保存到资产库 | 用户要求保存生成结果 |
| `request_gui_input` | 请求 GUI 输入 | 需要用户提供结构化输入时 |

#### 3.2.2 自然语言理解能力

Agent 能够理解多种表达方式：

| 用户表达 | Agent 理解 | 调用的 Tool |
|---------|-----------|------------|
| "把图1的衣服换成图2" | 换搭配操作 | `change_outfit` |
| "换一个韩系女模特" | 换模特，韩系风格 | `change_model` |
| "参考这张图的感觉" | 复刻参考图 | `replicate_reference` |
| "给这件衣服配个模特" | 生成模特图 | `generate_model_image` |
| "把袖子改短一点" | 局部编辑 | `edit_image` |
| "我之前上传过一个模特" | 搜索资产 | `search_assets` |
| "有没有室外场景" | 获取预设 | `get_presets` |
| "这张图不错，保存一下" | 保存资产 | `save_to_assets` |

#### 3.2.3 上下文理解

- **多轮对话**: 理解对话历史，支持连续操作
- **指代消解**: 理解"这张图"、"上一张"、"刚才生成的"等指代
- **图像标记**: 自动为上传图片标记 `image_1`、`image_2`，支持用户引用
- **生成结果引用**: 生成的图片标记为 `generated_1`、`generated_2`，可继续操作

#### 3.2.4 智能交互

**主动澄清**: 当用户意图不明确时，Agent 会主动询问：
```
用户: "帮我换一下"
Agent: "你想换什么呢？是换服装搭配、换模特，还是换背景？
        可以上传相关图片，我来帮你处理 📷"
```

**操作建议**: 完成任务后，Agent 会提供下一步建议：
```
Agent: "换搭配完成！✨ 效果还满意吗？
        你可以：
        • 让我再生成几张不同的
        • 调整一下背景
        • 换个模特试试"
```

**GUI 协同**: 当需要复杂输入时，Agent 会请求显示 GUI：
```
用户: "我想换搭配"
Agent: "好的！请在下方上传原图和新的服装图片 👇"
[显示换搭配 GUI 输入区]
```

---

## 4. Shoot Room Tab 详细需求

### 4.1 整体布局

```
┌─────────────────────────────────────────────────────────────────┐
│                                                         ┌────┐ │
│                                                         │ +  │ │ ← 添加场景元素
│                                                         └────┘ │
│                                                                 │
│                          ┌─────────┐                           │
│                          │         │                           │
│              ☀️ ←────────│  👤    │                           │
│            (光源)         │ (模特)  │                           │
│                          │         │                           │
│                          └─────────┘                           │
│                                                                 │
│     Light                                                       │
│     ━━━━━━━━━━○━━━━━━━━━━━                                     │
│     (光线强度滑块)                                               │
│                                                                 │
│                          ┌────┐                                │
│                          │ 📷 │ ──────────────► setting        │
│                          └────┘                                │
│                         (相机)                                  │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                       Shoot                              │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌────────┐ ┌────────┐ ┌────────┐                              │
│  │ model  │ │product │ │ scene  │                              │
│  └────────┘ └────────┘ └────────┘                              │
│                                                                 │
│  ┌──────────────────────┐ ┌──────────────────────┐             │
│  │        Chat          │ │     Shoot Room       │             │
│  └──────────────────────┘ └──────────────────────┘             │
└─────────────────────────────────────────────────────────────────┘
```

### 4.2 素材选择区

#### 4.2.1 模特选择 (model)

```
┌─────────────────────────────────────────────────────────────────┐
│                         ━━━                                     │
│  选择模特                                                  ✕    │
│  ─────────────────────────────────────────────────────────      │
│                                                                 │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐                        │
│  │  系统    │ │  我的    │ │  上传    │                        │
│  └──────────┘ └──────────┘ └──────────┘                        │
│  ═══════════                                                    │
│                                                                 │
│  风格筛选                                                       │
│  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐                  │
│  │  全部  │ │  韩系  │ │  日系  │ │  欧美  │                  │
│  └────────┘ └────────┘ └────────┘ └────────┘                  │
│                                                                 │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐                                  │
│  │    │ │    │ │    │ │    │                                  │
│  │    │ │    │ │    │ │    │                                  │
│  └────┘ └────┘ └────┘ └────┘                                  │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐                                  │
│  │    │ │    │ │    │ │    │                                  │
│  │    │ │    │ │    │ │    │                                  │
│  └────┘ └────┘ └────┘ └────┘                                  │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                       确认选择                           │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 4.2.2 商品选择 (product)

```
┌─────────────────────────────────────────────────────────────────┐
│                         ━━━                                     │
│  选择商品                                                  ✕    │
│  ─────────────────────────────────────────────────────────      │
│                                                                 │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐                        │
│  │  拍照    │ │  相册    │ │  我的    │                        │
│  └──────────┘ └──────────┘ └──────────┘                        │
│                                                                 │
│  最近使用                                                       │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐                                  │
│  │    │ │    │ │    │ │    │  ← 横向滚动                      │
│  └────┘ └────┘ └────┘ └────┘                                  │
│                                                                 │
│  我的商品库                                                     │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐                                  │
│  │    │ │    │ │    │ │    │                                  │
│  │    │ │    │ │    │ │    │                                  │
│  └────┘ └────┘ └────┘ └────┘                                  │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐                                  │
│  │    │ │    │ │    │ │    │                                  │
│  │    │ │    │ │    │ │    │                                  │
│  └────┘ └────┘ └────┘ └────┘                                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 4.2.3 场景选择 (scene)

```
┌─────────────────────────────────────────────────────────────────┐
│                         ━━━                                     │
│  选择场景                                                  ✕    │
│  ─────────────────────────────────────────────────────────      │
│                                                                 │
│  场景分类                                                       │
│  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐       │
│  │  全部  │ │  室内  │ │  户外  │ │  街拍  │ │  纯色  │       │
│  └────────┘ └────────┘ └────────┘ └────────┘ └────────┘       │
│                                                                 │
│  系统场景                                                       │
│  ┌────────────┐ ┌────────────┐ ┌────────────┐                  │
│  │            │ │            │ │            │                  │
│  │   摄影棚   │ │   咖啡厅   │ │   街道     │                  │
│  │            │ │            │ │            │                  │
│  └────────────┘ └────────────┘ └────────────┘                  │
│  ┌────────────┐ ┌────────────┐ ┌────────────┐                  │
│  │            │ │            │ │            │                  │
│  │   公园     │ │   海边     │ │   商场     │                  │
│  │            │ │            │ │            │                  │
│  └────────────┘ └────────────┘ └────────────┘                  │
│                                                                 │
│  自定义场景                                            上传 +   │
│  ┌────────────┐ ┌────────────┐                                 │
│  │            │ │            │                                 │
│  │   我的1    │ │   我的2    │                                 │
│  │            │ │            │                                 │
│  └────────────┘ └────────────┘                                 │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 4.3 场景编辑区

#### 4.3.1 添加场景元素

点击右上角 "+" 按钮，可添加场景中的物体：

```
┌─────────────────────────────────────────────────────────────────┐
│                         ━━━                                     │
│  添加场景元素                                              ✕    │
│  ─────────────────────────────────────────────────────────      │
│                                                                 │
│  家具                                                           │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐                          │
│  │椅子│ │沙发│ │桌子│ │床  │ │柜子│                          │
│  └────┘ └────┘ └────┘ └────┘ └────┘                          │
│                                                                 │
│  道具                                                           │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐                          │
│  │包包│ │帽子│ │眼镜│ │鞋子│ │饮品│                          │
│  └────┘ └────┘ └────┘ └────┘ └────┘                          │
│                                                                 │
│  植物                                                           │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐                                  │
│  │绿植│ │花束│ │盆栽│ │干花│                                  │
│  └────┘ └────┘ └────┘ └────┘                                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 4.4 拍摄控制区

#### 4.4.1 光线控制器

- **位置控制**：可拖动光源图标，调整光源在场景中的位置
- **方向控制**：可旋转光源图标，调整光线照射方向
- **强度控制**：底部滑块调整光线强度

```
光线位置映射：
┌─────────────────────────────────────┐
│                                     │
│    ☀️ (可拖动)                      │
│     ↓                               │
│     ↓  光线方向                     │
│     ↓                               │
│    👤 (模特)                        │
│                                     │
└─────────────────────────────────────┘

光线强度：
弱 ━━━━━━━━━━○━━━━━━━━━━ 强
```

#### 4.4.2 相机控制器

- **位置控制**：可拖动相机图标，调整拍摄角度
- **点击设置**：打开高级设置面板

```
相机位置映射：
┌─────────────────────────────────────┐
│                                     │
│           👤 (模特)                 │
│                                     │
│                                     │
│           📷 (可拖动)               │
│                                     │
└─────────────────────────────────────┘
```

#### 4.4.3 相机高级设置

```
┌─────────────────────────────────────────────────────────────────┐
│                         ━━━                                     │
│  相机设置                                                  ✕    │
│  ─────────────────────────────────────────────────────────      │
│                                                                 │
│  ┌──────────────────────┐ ┌──────────────────────┐             │
│  │       机位视角       │ │        焦距          │             │
│  └──────────────────────┘ └──────────────────────┘             │
│  ════════════════════════                                       │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                                                          │   │
│  │                     实时预览区                           │   │
│  │                   (显示当前视角效果)                     │   │
│  │                                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  视角选择                                                       │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐                        │
│  │  俯拍    │ │  平拍    │ │  仰拍    │                        │
│  │  (上方)  │ │  (居中)  │ │  (下方)  │                        │
│  └──────────┘ └──────────┘ └──────────┘                        │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                       确认                               │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**焦距调整 Tab：**

```
┌─────────────────────────────────────────────────────────────────┐
│                         ━━━                                     │
│  相机设置                                                  ✕    │
│  ─────────────────────────────────────────────────────────      │
│                                                                 │
│  ┌──────────────────────┐ ┌──────────────────────┐             │
│  │       机位视角       │ │        焦距          │             │
│  └──────────────────────┘ └──────────────────────┘             │
│                           ════════════════════════              │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                                                          │   │
│  │                     实时预览区                           │   │
│  │              (拖动焦距时实时放大/缩小)                   │   │
│  │                                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  焦距                                                           │
│  16mm ━━━━━━━━━━━━━━━━○━━━━━━━━━━━━━━━━ 55mm                   │
│        广角/远景              ↑              长焦/近景          │
│                          当前: 35mm                             │
│                                                                 │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐                        │
│  │  远景    │ │  中景    │ │  近景    │  ← 快捷预设            │
│  │  16mm   │ │  35mm   │ │  55mm   │                        │
│  └──────────┘ └──────────┘ └──────────┘                        │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                       确认                               │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 4.5 拍摄执行

点击 "Shoot" 按钮后：

1. 收集所有参数（模特、商品、场景、光线、机位、焦距等）
2. 调用 AI 生成接口
3. 显示生成进度
4. 展示生成结果

---

## 5. 通用功能需求

### 5.1 资产管理

#### 5.1.1 资产类型

| 类型 | 描述 | 来源 |
|-----|------|-----|
| 模特 | 模特参考图 | 系统预设 / 用户上传 / AI 生成 |
| 商品 | 商品图片 | 用户上传 / 拍照 |
| 场景 | 背景场景图 | 系统预设 / 用户上传 |
| 生成历史 | AI 生成的结果图 | AI 生成 |

#### 5.1.2 资产操作

- 上传：支持相册选择、拍照
- 删除：支持单个删除、批量删除
- 收藏：标记常用素材
- 分类：支持标签分类
- 搜索：支持关键词搜索

### 5.2 用户系统

#### 5.2.1 账户功能

- 注册/登录（手机号、邮箱）
- 个人信息管理
- 密码修改

#### 5.2.2 配额管理

| 配额类型 | 说明 |
|---------|------|
| 生成次数 | 每日/每月可生成图片数量 |
| 存储空间 | 资产库存储容量 |
| 高级功能 | 部分功能需要高级订阅 |

---

## 6. 非功能需求

### 6.1 性能要求

| 指标 | 要求 |
|-----|------|
| 启动时间 | < 2秒 |
| 页面切换 | < 300ms |
| 图片加载 | 渐进式加载，< 1秒显示缩略图 |
| AI 生成 | < 30秒返回结果 |

### 6.2 兼容性要求

| 项目 | 要求 |
|-----|------|
| iOS 版本 | iOS 15.0+ |
| 设备 | iPhone 12 及以上 |
| 网络 | 支持 4G/5G/WiFi |

### 6.3 安全要求

- 用户数据加密存储
- 网络传输 HTTPS 加密
- 敏感操作需二次确认
- 支持生物识别登录

---

## 7. MVP 范围定义

### 7.1 第一版 (v1.0) 功能范围

**Chat Tab：**
- [x] 基础对话交互（文本输入、图像上传）
- [x] 图像标记系统（图1/图2）
- [x] Action Bar：换搭配、换模特、复刻参考图
- [x] GUI 输入区
- [x] 结果展示与后续 Action
- [ ] 对话历史保存（v1.1）
- [ ] 批量生成（v1.1）

**Shoot Room Tab：**
- [x] 素材选择（模特、商品、场景）
- [x] 光线控制器
- [x] 相机位置控制
- [x] 相机高级设置（视角、焦距）
- [ ] 场景元素添加（v1.1）
- [ ] 多光源支持（v1.2）

**通用功能：**
- [x] 基础资产管理
- [x] 用户注册/登录
- [x] 基础配额系统
- [ ] 资产分类/搜索（v1.1）
- [ ] 团队协作（v2.0）

### 7.2 后续版本规划

| 版本 | 主要功能 | 预计时间 |
|-----|---------|---------|
| v1.1 | 对话历史、批量生成、场景元素、资产搜索 | +4周 |
| v1.2 | 多光源、视频生成预览、高级编辑 | +6周 |
| v2.0 | 团队协作、品牌管理、API 开放 | +12周 |

---

## 8. 成功指标

### 8.1 核心指标

| 指标 | 目标 | 说明 |
|-----|------|-----|
| DAU | 1000+ | 日活跃用户 |
| 生成成功率 | > 95% | AI 生成成功率 |
| 用户满意度 | > 4.5/5 | 生成结果满意度评分 |
| 留存率 | > 40% | 7日留存 |

### 8.2 业务指标

| 指标 | 目标 | 说明 |
|-----|------|-----|
| 付费转化率 | > 10% | 免费用户转付费 |
| ARPU | > ¥100/月 | 平均用户收入 |
| NPS | > 50 | 净推荐值 |

---

## 9. 附录

### 9.1 术语表

| 术语 | 定义 |
|-----|------|
| Action Bar | 快捷操作入口栏 |
| GUI 输入区 | 结构化的图形界面输入区域 |
| Shoot Room | 专业拍摄室，提供可视化控制 |
| 复刻参考图 | 参考目标图的风格/构图进行生成 |

### 9.2 参考资料

- brand_camera 项目技术架构
- Vertex AI Gemini API 文档
- iOS Human Interface Guidelines

---

*文档版本: 1.0.0 | 最后更新: 2025-01-01*

